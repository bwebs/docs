---
sidebar_position: 6
sidebar_label: User Membership
slug: ./user-membership
toc_max_heading_level: 2
---

import { UserAccountAssociation } from "../types/accounts";
import { Profile } from "../types/profile";
import { PaginatedResponse } from "../types/pagination";

# User Membership

## Add a User to Multiple Accounts

This endpoint is used to add a user to multiple accounts in one call.

A custom profile can also be supplied for each account. This profile will be merged with the user's main profile when sending to the user with that account.

**URL:** `https://api.courier.com/users/:user_id/accounts`

**Method:** `PUT`

**Path Parameters:**

<Params>
  <Param name="user_id" type="string" required>
    Id of the user to be added to the supplied accounts
  </Param>
</Params>

**Body**

<Params>
  <Param name="accounts" type="UserAccountAssociation">
    A list of accounts the user a member of.
    <ChildParams name="user account association type">
      <UserAccountAssociation />
    </ChildParams>
  </Param>
</Params>

**Example:**

`PUT /users/john/accounts`

```js
{
  "accounts": [
    {
      "account_id": "acme",
      "profile": {
        "email": "john@acme.com",
      }
    },
    {
      "account_id": "bizcorp",
      "profile": {
        "email": "john@bizcorp.com",
      }
    },
  ]
}
```

Response:

```
status: 204
```

## Add a User to a Single Account

This endpoint is used to add a single account.

A custom profile can also be supplied with the account. This profile will be merged with the user's main profile when sending to the user with that account.

**URL:** `https://api.courier.com/users/:user_id/accounts/:account_id`

**Method:** `PUT`

**Path Parameters:**

<Params>
  <Param name="user_id" type="string" required>
    Id of the user to be added to the supplied account.
  </Param>
  <Param name="account_id" type="string" required>
    Id of the account the user should be added to.
  </Param>
</Params>

**Body**

<Params>
  <Param name="profile" type="Profile">
    A profile to merge with the main user profile when sending via this account.
    <ChildParams name="profile type">
      <Profile />
    </ChildParams>
  </Param>
</Params>

**Example:**

`PUT /users/john/accounts/acme`

```js
{
  "profile": {
    "email": "john@acme.com",
  }
}
```

Response:

```
status: 204
```

## Remove User From All Associated Accounts

Removes a user from any accounts they may have been associated with.

**URL:** `https://api.courier.com/users/:user_id/accounts`

**Method:** `DELETE`

**Path Parameters:**

<Params>
  <Param name="user_id" type="string" required>
    Id of the user to be removed from all accounts.
  </Param>
</Params>

**Example:**

`DELETE /users/john/accounts`

Response:

```
status: 204
```

## Remove User from an Account

Removes a user from the passed account.

**URL:** `https://api.courier.com/users/:user_id/accounts/:account_id`

**Method:** `DELETE`

**Path Parameters:**

<Params>
  <Param name="user_id" type="string" required>
    Id of the user to be removed from the supplied account.
  </Param>
  <Param name="account_id" type="string" required>
    Id of the account the user should be removed from.
  </Param>
</Params>

**Example:**

`DELETE /users/john/accounts/acme`

Response:

```
status: 204
```

## Get accounts associated with a given user

Removes a user from any accounts they may have been associated with.

**URL:** `https://api.courier.com/users/:user_id/accounts`

**Method:** `GET`

**Path Parameters:**

<Params>
  <Param name="user_id" type="string" required>
    Id of the user to retrieve all associated accounts for.
  </Param>
</Params>

**Query Parameters:**

<Params>
  <Param name="cursor" type="string">
    Pagination cursor to retrieve next page, returned by previous get request.
  </Param>
</Params>

**Response Body**

<PaginatedResponse type="array<UserAccountAssociation>">
  An array of user account associations.
  <ChildParams name="user account association type">
    <UserAccountAssociation />
  </ChildParams>
</PaginatedResponse>

**Example:**

`GET /users/john/accounts`

Response:

```
status: 200
```

```
{
	"has_more": false,
	"items": [
		{
			"account_id": "acme",
			"profile": {
				"role": "admin"
			},
			"user_id": "john"
		},
		{
			"account_id": "biggle",
			"profile": {
				"role": "normal"
			},
			"user_id": "john"
		},
		{
			"account_id": "example",
			"profile": {
				"role": "guest"
			},
			"user_id": "john"
		}
	],
	"type": "list"
}
```

## Get a User Account Association

Returns the details of a user's membership with the supplied account

**URL:** `https://api.courier.com/users/:user_id/accounts/:account_id`

**Method:** `DELETE`

**Path Parameters:**

<Params>
  <Param name="user_id" type="string" required>
    Id of the user to retrieve account details for.
  </Param>
  <Param name="account_id" type="string" required>
    Id of the account to retrieve details for.
  </Param>
</Params>

**Response Body**

<Params>
  <Param name="user_id" type="string" required>
    User id the association is tied to.
  </Param>
  <Param name="account_id" type="string" required>
    Account id the association is tied to.
  </Param>
  <Param name="profile" type="Profile">
    A profile merged with the main user profile when sending via this account.
    <ChildParams name="profile type">
      <Profile />
    </ChildParams>
  </Param>
</Params>

**Example:**

`GET /users/john/accounts/acme`

Response:

```
status: 200
```

```
{
  "account_id": "acme",
  "profile": {
    "role": "admin"
  },
  "user_id": "john"
}
```
